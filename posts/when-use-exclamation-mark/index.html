<!doctype html><html lang=en-us><head><meta name=ROBOTS content="INDEX, FOLLOW"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-2159845-11','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>When use exclamation (!) mark in names of functions? - Clojure Blog</title><meta name=description content="Naming is a hard thing. What ! really mean in functions names? When to use it?"><meta name=author content="Krzysztof Władyka"><link rel="shortcut icon" href=/img/clojure-icon-32.png type=image/x-icon><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js integrity=sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><link rel=stylesheet href=/sass/main.min.e56b0f76143debd6df3cb44954ca9b65bf06439fee332c88f655980b7a15b5a7.css><script defer src=/js/anchors-for-headers.min.8b66a98885b47a4aa1c04b0d517fa11d173b74e0099f934fe46d3249bed00544.js></script><link href=/posts/index.xml rel=alternate type=application/rss+xml title="Clojure Blog"><script type=application/ld+json>{"@context":"https://www.schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"Blog","@id":"https://clojure.wladyka.eu/posts/when-use-exclamation-mark/"},"datePublished":"2015-06-19T00:00:00","dateModified":"2015-06-19T00:00:00","name":"When use exclamation (!) mark in names of functions?","headline":"When use exclamation (!) mark in names of functions?","description":"Naming is a hard thing. What ! really mean in functions names? When to use it?\n","articleBody":"Naming is a hard thing. What ! really mean in functions names? When to use it?\nOn site clojure-style-guide we can read:\n The names of functions / macros that are not safe in STM transactions should end with an exclamation mark (e.g. reset!).\n But what does it really mean? Anything what has a non-idempotent side effect.\n Idempotent operation is the one that has no additional effect if it is called more than once with the same input parameters.\n Make it simple:\n(create-user! ...)(create-user-only-if-not-exist ...) Why do we need that? Functions in STM transactions can be run many times, because of some conflicts. So using function create-user! you will add the same user many times, but function create-user-only-if-not-exist will add him only once, even if it will be run many times.\nConclusion (create-user! ...) has additional effects if you run it more than once with the same input. For example send e-mail each time or create +1 user.\n(create-user ...) wouldn\u0026rsquo;t have additional effects even if you run this many times with the same input.\n","author":{"@type":"Person","name":"Krzysztof Władyka","url":"https://wladyka.eu"}}</script><meta property=og:title content="When use exclamation (!) mark in names of functions?"><meta property=og:description content="Naming is a hard thing. What ! really mean in functions names? When to use it?"><meta property=og:type content=article><meta property=og:url content=https://clojure.wladyka.eu/posts/when-use-exclamation-mark/><meta property=article:published_time content=2015-06-19T00:00:00+00:00><meta property=article:modified_time content=2015-06-19T00:00:00+00:00><meta name=twitter:card content=summary><meta name=twitter:title content="When use exclamation (!) mark in names of functions?"><meta name=twitter:description content="Naming is a hard thing. What ! really mean in functions names? When to use it?"><meta itemprop=name content="When use exclamation (!) mark in names of functions?"><meta itemprop=description content="Naming is a hard thing. What ! really mean in functions names? When to use it?"><meta itemprop=datePublished content=2015-06-19T00:00:00&#43;00:00><meta itemprop=dateModified content=2015-06-19T00:00:00&#43;00:00><meta itemprop=wordCount content=174><meta itemprop=keywords content></head><body><div class=container><div class="row justify-content-md-center"><div class=col-xl-8><div class=top><div class="row justify-content-center justify-content-md-between align-items-center"><div class=col-auto><h1><a class=blog-title href=/><img class=kwladyka src="https://www.gravatar.com/avatar/ce810750d0cfb4c1de5a298921388556?s=140" alt="Krzysztof Władyka">
<img src=/img/clojure-logo.svg alt="Clojure Blog"><div class="d-none d-md-inline">Clojure Blog</div></a></h1></div><div class="w-100 d-block d-md-none"></div><div class="col-auto d-md-none" style=padding-top:10px><a class=blog-title style=margin-top:10px href=/>Clojure Blog</a></div><div class="w-100 d-block d-md-none"></div><nav class=col-auto><a class=btn href=https://wladyka.eu title=Author>Author</a>
<a class=btn href=https://clojure.wladyka.eu/posts/>Archive</a>
<a class=btn href=/posts/index.xml title="Clojure Blog" type=application/rss+xml target=_blank>Feed</a></nav></div></div></div></div><div class="row justify-content-md-center"><div class=col-xl-8><div class=row><div class=col-12><article><h1 itemprop=headline>When use exclamation (!) mark in names of functions?</h1><div class=post-meta>2015-06-19</div><aside class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></aside><div><p>Naming is a hard thing. What <code>!</code> really mean in functions names? When to use it?</p><p>On site <a href=https://github.com/bbatsov/clojure-style-guide#changing-state-fns-with-exclamation-mark>clojure-style-guide</a> we can read:</p><blockquote><p>The names of functions / macros that are not safe in STM transactions should end with an exclamation mark (e.g. reset!).</p></blockquote><p>But what does it really mean? Anything what has a non-idempotent side effect.</p><blockquote><p>Idempotent operation is the one that has no additional effect if it is called more than once with the same input parameters.</p></blockquote><p>Make it simple:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-clojure data-lang=clojure>(<span style=color:#a6e22e>create-user!</span> ...)</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-clojure data-lang=clojure>(<span style=color:#a6e22e>create-user-only-if-not-exist</span> ...)</code></pre></div><p>Why do we need that? Functions in STM transactions can be run many times, because of some conflicts. So using function <code>create-user!</code> you will add the same user many times, but function <code>create-user-only-if-not-exist</code> will add him only once, even if it will be run many times.</p><h2 id=conclusion>Conclusion</h2><p><code>(create-user! ...)</code> has additional effects if you run it more than once with the same input. For example send e-mail each time or create +1 user.</p><p><code>(create-user ...)</code> wouldn&rsquo;t have additional effects even if you run this many times with the same input.</p></div></article></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"clojure-wladyka"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></body></html>